{% extends 'base.html' %}
{% load static %}

{% block title %}Menu - Restaurant{% endblock %}

{% block content %}
    <h2 style="color: white; font-size: 2.5em; margin-bottom: 20px;">Our Menu</h2>

    {% if user.is_authenticated and user.is_staff %}
        <a href="{% url 'add_menu_item' %}" class="btn btn-primary" style="margin-bottom: 20px;">Add Menu Item</a>
    {% endif %}

    <div class="menu-category">
        <h3>Starters</h3>
        <div class="menu-items">
            {% for item in menu_items %}
                {% if item.category == 'Starters' %}
                    <div class="menu-item">
                        <img src="{% if item.image %}{{ item.image.url }}{% else %}{% static 'images/default-image.jpg' %}{% endif %}" alt="{{ item.name }}">
                        <h3>{{ item.name }}</h3>
                        <p>{{ item.description }}</p>
                        <p><strong>${{ item.price }}</strong></p>
                        
                        {% if user.is_authenticated and user.is_staff %}
                            <a href="{% url 'edit_menu_item' item.id %}" class="btn btn-secondary">Edit</a>
                            <a href="{% url 'delete_menu_item' item.id %}" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this item?')">Delete</a>
                        {% endif %}
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>

    <div class="menu-category">
        <h3>Main Courses</h3>
        <div class="menu-items">
            {% for item in menu_items %}
                {% if item.category == 'Mains' %}
                    <div class="menu-item">
                        <img src="{% if item.image %}{{ item.image.url }}{% else %}{% static 'images/default-image.jpg' %}{% endif %}" alt="{{ item.name }}">
                        <h3>{{ item.name }}</h3>
                        <p>{{ item.description }}</p>
                        <p><strong>${{ item.price }}</strong></p>
                        
                        {% if user.is_authenticated and user.is_staff %}
                            <a href="{% url 'edit_menu_item' item.id %}" class="btn btn-secondary">Edit</a>
                            <a href="{% url 'delete_menu_item' item.id %}" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this item?')">Delete</a>
                        {% endif %}
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>

    <div class="menu-category">
        <h3>Desserts</h3>
        <div class="menu-items">
            {% for item in menu_items %}
                {% if item.category == 'Desserts' %}
                    <div class="menu-item">
                        <img src="{% if item.image %}{{ item.image.url }}{% else %}{% static 'images/default-image.jpg' %}{% endif %}" alt="{{ item.name }}">
                        <h3>{{ item.name }}</h3>
                        <p>{{ item.description }}</p>
                        <p><strong>${{ item.price }}</strong></p>
                        
                        {% if user.is_authenticated and user.is_staff %}
                            <a href="{% url 'edit_menu_item' item.id %}" class="btn btn-secondary">Edit</a>
                            <a href="{% url 'delete_menu_item' item.id %}" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this item?')">Delete</a>
                        {% endif %}
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>
{% endblock %}
